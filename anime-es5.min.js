'use strict';(function(l,q){"function"===typeof define&&define.amd?define([],q):"object"===typeof module&&module.exports?module.exports=q():l.anime=q()})(this,function(){function l(a,b){if(a.includes)return a.includes(b);d.array(a)||(a=[].slice.call(a));return a.length?a.some(function(a){return a===b}):!1}var q="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY".split(" ");window.performance||Date.now();var C={duration:1E3,delay:0,loop:!1,autoplay:!0,
direction:"normal",easing:"easeOutElastic",reversed:!1,elasticity:400,round:!1},d={array:Array.isArray,object:function(a){return l(Object.prototype.toString.call(a),"Object")},html:function(a){return a instanceof NodeList||a instanceof HTMLCollection},node:function(a){return a.nodeType},bool:function(a){return"boolean"===typeof a},svg:function(a){return a instanceof SVGElement},dom:function(a){return d.node(a)||d.svg(a)},number:function(a){return!isNaN(parseInt(a))},string:function(a){return"string"===
typeof a},func:function(a){return"function"===typeof a},undef:function(a){return"undefined"===typeof a},null:function(a){return"null"===typeof a},hex:function(a){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a)},rgb:function(a){return/^rgb/.test(a)},rgba:function(a){return/^rgba/.test(a)},hsl:function(a){return/^hsl/.test(a)},color:function(a){return d.hex(a)||d.rgb(a)||d.rgba(a)||d.hsl(a)}},D=function(){var a={},b={Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-
a*a)},Elastic:function(a,c){if(0===a||1===a)return a;c=1-Math.min(c,998)/1E3;a=a/1-1;return-(Math.pow(2,10*a)*Math.sin(2*(a-c/(2*Math.PI)*Math.asin(1))*Math.PI/c))},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var c,b=4;a<((c=Math.pow(2,--b))-1)/11;);return 1/Math.pow(4,3-b)-7.5625*Math.pow((3*c-2)/22-a,2)}};["Quad","Cubic","Quart","Quint","Expo"].forEach(function(a,c){b[a]=function(a){return Math.pow(a,c+2)}});var c=function(c){var f=b[c];a["easeIn"+c]=f;a["easeOut"+c]=function(a,
c){return 1-f(1-a,c)};a["easeInOut"+c]=function(a,c){return.5>a?f(2*a,c)/2:1-f(-2*a+2,c)/2}},f;for(f in b)c(f);a.linear=function(a){return a};return a}(),v=function(a){return d.string(a)?a:""+a},E=function(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},F=function(a){if(d.color(a))return!1;try{return document.querySelectorAll(a)}catch(b){return!1}},w=function(a){if(d.array(a))return a;d.string(a)&&(a=F(a)||a);return d.html(a)?[].slice.call(a):[a]},x=function(a){return Array.prototype.reduce.call(a,
function(a,c){return a.concat(d.array(c)?x(c):c)},[])},R=function(a,b){var c={};a.forEach(function(a){var e=JSON.stringify(b.map(function(c){return a[c]}));c[e]=c[e]||[];c[e].push(a)});return Object.keys(c).map(function(a){return c[a]})},y=function(a){return a.filter(function(a,c,f){return f.indexOf(a)===c})},u=function(a){var b={},c;for(c in a)b[c]=a[c];return b},r=function(a,b){for(var c in b)a[c]=d.undef(a[c])?b[c]:a[c];return a},G=function(a){function b(a,b){b.type=a;b.handle={on:function(){e.add(b);
return b.handle},once:function(){return f(a,b)},off:function(){c(b);return b.handle}};e.add(b);return b.handle}function c(a){e.has(a)&&e.delete(a);return a.handle}function f(f,e){if(d.func(e)){var g=function(){var d=function(){e.apply(a,arguments);c(d)};c(e);return{v:b(f,d)}}();if("object"===typeof g)return g.v}}d.object(a)||(a={});var e=new Set;a.listeners=e;a.on=b;a._once=f;a.once=function(c){return new Promise(function(b){return a._once(c,b)})};return a},t=function(a,b){var c=arguments;0<b.listeners.size&&
function(){var f=[].slice.call(c,1);b.listeners.forEach(function(c){c.type==a&&c.apply(b,f.concat(c.handle))})}()},S=function(a){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,c,b,d){return c+c+b+b+d+d});var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);a=parseInt(b[1],16);var c=parseInt(b[2],16),b=parseInt(b[3],16);return"rgb("+a+","+c+","+b+")"},z=function(a,b,c){0>c&&(c+=1);1<c&&--c;return c<1/6?a+6*(b-a)*c:.5>c?b:c<2/3?a+(b-a)*(2/3-c)*6:a},n=function(a){return/([\+\-]?[0-9|auto\.]+)(%|px|pt|em|rem|in|cm|mm|ex|pc|vw|vh|deg)?/.exec(a)[2]},
H=function(a,b,c){return n(b)?b:l(a,"translate")?n(c)?b+n(c):b+"px":l(a,"rotate")||l(a,"skew")?b+"deg":b},I=function(a,b){if(d.dom(a)&&l(q,b))return"transform";if(d.dom(a)&&"transform"!==b&&A(a,b))return"css";if(d.dom(a)&&(a.getAttribute(b)||d.svg(a)&&a[b]))return"attribute";if(!d.null(a[b])&&!d.undef(a[b]))return"object"},A=function(a,b){if(b in a.style)return getComputedStyle(a).getPropertyValue(E(b))||"0"},T=function(a,b){var c=l(b,"scale")?1:0;a=a.style.transform;if(!a)return c;for(var f=/(\w+)\((.+?)\)/g,
e=[],d=[],g=[];e=f.exec(a);)d.push(e[1]),g.push(e[2]);a=g.filter(function(a,c){return d[c]===b});return a.length?a[0]:c},J=function(a,b){var c=I(a,b);return"transform"===c?T(a,b):"css"===c?A(a,b):"attribute"===c?a.getAttribute(b):a[b]||0},K=function(a,b,c){if(d.color(b)){if(!d.rgb(b)&&!d.rgba(b))if(d.hex(b))b=S(b);else if(d.hsl(b)){a=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(b);b=parseInt(a[1])/360;c=parseInt(a[2])/100;a=parseInt(a[3])/100;if(0===c)c=a=b=a;else{var f=.5>a?a*(1+c):a+c-a*c,e=2*
a-f;c=z(e,f,b+1/3);a=z(e,f,b);b=z(e,f,b-1/3)}b="rgb("+255*c+","+255*a+","+255*b+")"}else b=void 0;return b}if(n(b))return b;a=n(a.to)?n(a.to):n(a.from);!a&&c&&(a=n(c));return a?b+a:b},L=function(a){var b=/-?\d*\.?\d+/g;return{original:a,numbers:v(a).match(b)?v(a).match(b).map(Number):[0],strings:v(a).split(b)}},U=function(a,b,c){return b.reduce(function(b,e,d){return b+a[d-1]+(e?e:c[d-1])})},M=function(a){return a?x(d.array(a)?a.map(w):w(a)):[]},V=function(a){return M(a).map(function(a,c){return{target:a,
id:c}})},W=function(a,b){var c=[],f;for(f in a)if(!C.hasOwnProperty(f)&&"targets"!==f){var e=d.object(a[f])?u(a[f]):{value:a[f]};e.name=f;c.push(r(e,b))}return c},N=function(a,b,c,f){"transform"===c?(c=a+("("+H(a,b.from,b.to)+")"),b=a+("("+H(a,b.to)+")")):(a="css"===c?A(f,a):void 0,c=K(b,b.from,a),b=K(b,b.to,a));return{from:L(c),to:L(b)}},X=function(a,b){var c=[];a.forEach(function(f,e){var p=f.target;return b.forEach(function(b){var l=I(p,b.name);if(l){var k;k=b.name;var h=b.value,h=w(d.func(h)?
h(p,e):h);k={from:1<h.length?h[0]:J(p,k),to:1<h.length?h[1]:h[0]};h=u(b);h.animatables=f;h.type=l;h.from=N(b.name,k,h.type,p).from;h.to=N(b.name,k,h.type,p).to;h.round=d.color(k.from)||h.round?1:0;h.delay=(d.func(h.delay)?h.delay(p,e,a.length):h.delay)/g.speed;h.duration=(d.func(h.duration)?h.duration(p,e,a.length):h.duration)/g.speed;c.push(h)}})});return c},Y=function(a,b){a=X(a,b);return R(a,["name","from","to","delay","duration"]).map(function(a){var b=u(a[0]);b.animatables=a.map(function(a){return a.animatables});
b.totalDuration=b.delay+b.duration;return b})},B=function(a,b){a.tweens.forEach(function(c){var f=c.from,e=a.duration-(c.delay+c.duration);c.from=c.to;c.to=f;b&&(c.delay=e)});a.reversed=!!a.reversed},O=function(a){var b=[],c=[];a.tweens.forEach(function(a){if("css"===a.type||"transform"===a.type)b.push("css"===a.type?E(a.name):"transform"),a.animatables.forEach(function(a){return c.push(a.target)})});return{properties:y(b).join(", "),elements:y(c)}},Z=function(a){var b=O(a);b.elements.forEach(function(a){return a.style.willChange=
b.properties})},aa=function(a){O(a).elements.forEach(function(a){return a.style.removeProperty("will-change")})},ba=function(a,b){var c=a.path,f=a.value*b,e=function(e){return c.getPointAtLength(1<b?a.value+(e||0):f+(e||0))},d=e(),g=e(-1),e=e(1),k=a.name;return"translateX"===k?d.x:"translateY"===k?d.y:"rotate"===k?180*Math.atan2(e.y-g.y,e.x-g.x)/Math.PI:void 0},ca=function(a,b){var c=Math.min(Math.max(b-a.delay,0),a.duration)/a.duration;b=a.to.numbers.map(function(b,e){e=a.from.numbers[e];var d=D[a.easing](c,
a.elasticity);b=a.path?ba(a,d):e+d*(b-e);return a.round?Math.round(b*a.round)/a.round:b});return U(b,a.to.strings,a.from.strings)},P=function(a,b){var c={};a.time=Math.min(b,a.duration);a.progress=a.time/a.duration*100;a.tweens.forEach(function(a){a.currentValue=ca(a,b);var f=a.currentValue;a.animatables.forEach(function(b){var d=b.id;switch(a.type){case "css":b.target.style[a.name]=f;break;case "attribute":b.target.setAttribute(a.name,f);break;case "object":b.target[a.name]=f;break;case "transform":c||
(c={}),c[d]||(c[d]=[]),c[d].push(f)}})});if(c)for(var f in c)a.animatables[f].target.style.transform=c[f].join(" ");t("update",a);return a},Q=function(a){var b={animatables:V(a.targets),settings:r(a,C),time:0,progress:0,running:!1,started:!1,ended:!1};b.properties=W(a,b.settings);b.tweens=Y(b.animatables,b.properties);b.duration=b.tweens.length?Math.max.apply(Math,b.tweens.map(function(a){return a.totalDuration})):a.duration/g.speed;return G(b)},m=[],k={raf:0,play:function(){k.raf=requestAnimationFrame(k.step)},
pause:function(){cancelAnimationFrame(k.raf);k.raf=0},step:function(a){for(var b=0;b<m.length;b++)m[b].tick(a);k.play()}},g=function(a){var b={},c=Q(a);["complete","begin","update"].forEach(function(a){if(d.func(c.settings[a]))c["update"==a?"on":"_once"](a,c.settings[a])});c.tick=function(a){if(c.running){c.ended=!1;b.current=b.last+a-b.start;var e=c.settings;b.current>=e.delay&&(c.started||t("begin",c),c.started=!0);P(c,b.current);b.current>=c.duration&&(e.loop?(b.start=a,"alternate"===e.direction&&
B(c,!0),d.number(e.loop)&&e.loop--):(c.ended=!0,c.pause(),c.started=!1,t("complete",c)));b.last=0}};c.seek=function(a){return P(c,a/100*c.duration)};c.pause=function(){c.running=!1;t("pause",c);aa(c);var a=m.indexOf(c);-1<a&&m.splice(a,1);m.length||k.pause();return c};c.play=function(a){a&&(c=r(Q(r(a,c.settings)),c));c.pause();c.running=!0;b.start=performance.now();b.last=c.ended?0:c.time;a=c.settings;"reverse"===a.direction&&B(c);"alternate"!==a.direction||a.loop||(a.loop=1);Z(c);m.push(c);0==k.raf&&
k.play();return c};c.restart=function(){c.reversed&&B(c);t("restart",c);c.pause();c.seek(0);return c.play()};c.settings.autoplay&&c.play();return c};g.remove=function(a){a=M(a);for(var b=m.length-1;0<=b;b--)for(var c=m[b],d=c.tweens.length-1;0<=d;d--)for(var e=c.tweens[d],g=e.animatables.length-1;0<=g;g--)l(a,e.animatables[g].target)&&(e.animatables.splice(g,1),e.animatables.length||c.tweens.splice(d,1),c.tweens.length||c.pause())};g.speed=1;g.list=m;g.easings=D;g.getValue=J;g.path=function(a){a=
d.string(a)?F(a)[0]:a;return{path:a,value:a.getTotalLength()}};g.random=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};g.includes=l;g.dupeObj=u;g.mergeObjs=r;g.flattenArr=x;g.dropArrDupes=y;g.eventsys=G;g.play=k.play;g.pause=k.pause;return g});
