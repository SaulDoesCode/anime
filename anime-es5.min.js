'use strict';(function(l,p){"function"===typeof define&&define.amd?define([],p):"object"===typeof module&&module.exports?module.exports=p():l.anime=p()})(this,function(){function l(a,b){if(a.includes)return a.includes(b);e.array(a)||(a=Array.prototype.slice.call(a));return 0===a.length?!1:a.some(function(a){return a===searchitem})}function p(a){var b={evtlisteners:new Set,stop:!1,on:function(a,d){if(!e.func(d))throw new TypeError(".on("+a+",func) : func is not a function");d.etype=a;b.evtlisteners.add(d);
return{on:function(){d.etype=a;b.evtlisteners.add(d);return b},off:function(){return b.off(d)}}},once:function(c,d){function f(){d.apply(a,arguments);b.off(f)}b.on(c,f)},off:function(a){b.evtlisteners.has(a)&&b.evtlisteners.delete(a);return b},emit:function(c){var d=arguments;b.stop||function(){var f=Array.prototype.slice.call(d,1);b.evtlisteners.forEach(function(d){d.etype!=c||b.stop||d.apply(a,f)})}();return b},stopall:function(a){b.stop=e.bool(a)?a:!0},defineHandle:function(a,d){d||(d=a);this[a]=
function(a,c){return b[1==c?"once":"on"](d,a)};return b}};Object.keys(b).forEach(function(c){Object.defineProperty(a,c,{value:b[c],enumerable:!1,writable:!1})});return a}var P="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY".split(" "),C={duration:1E3,delay:0,loop:!1,autoplay:!0,direction:"normal",easing:"easeOutElastic",elasticity:400,round:!1},e=function(){return{array:Array.isArray,object:function(a){return l(Object.prototype.toString.call(a),
"Object")},html:function(a){return a instanceof NodeList||a instanceof HTMLCollection},node:function(a){return a.nodeType},bool:function(a){return"boolean"===typeof a},svg:function(a){return a instanceof SVGElement},number:function(a){return!isNaN(parseInt(a))},string:function(a){return"string"===typeof a},func:function(a){return"function"===typeof a},undef:function(a){return"undefined"===typeof a},null:function(a){return"null"===typeof a},hex:function(a){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a)},
rgb:function(a){return/^rgb/.test(a)},rgba:function(a){return/^rgba/.test(a)},hsl:function(a){return/^hsl/.test(a)},color:function(a){return e.hex(a)||e.rgb(a)||e.rgba(a)||e.hsl(a)}}}(),D=function(){var a={},b={Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a,b){if(0===a||1===a)return a;b=1-Math.min(b,998)/1E3;a=a/1-1;return-(Math.pow(2,10*a)*Math.sin(2*(a-b/(2*Math.PI)*Math.asin(1))*Math.PI/b))},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,
f=4;a<((b=Math.pow(2,--f))-1)/11;);return 1/Math.pow(4,3-f)-7.5625*Math.pow((3*b-2)/22-a,2)}};["Quad","Cubic","Quart","Quint","Expo"].forEach(function(a,d){b[a]=function(a){return Math.pow(a,d+2)}});Object.keys(b).forEach(function(c){var d=b[c];a["easeIn"+c]=d;a["easeOut"+c]=function(a,b){return 1-d(1-a,b)};a["easeInOut"+c]=function(a,b){return.5>a?d(2*a,b)/2:1-d(-2*a+2,b)/2}});a.linear=function(a){return a};return a}(),x=function(a){return e.string(a)?a:""+a},E=function(a){return a.replace(/([a-z])([A-Z])/g,
"$1-$2").toLowerCase()},F=function(a){if(e.color(a))return!1;try{return document.querySelectorAll(a)}catch(b){return!1}},q=function(a){if(e.array(a))return a;e.string(a)&&(a=F(a)||a);return e.html(a)?[].slice.call(a):[a]},t=function(a){return Array.prototype.reduce.call(a,function(a,c){return a.concat(e.array(c)?t(c):c)},[])},Q=function(a,b){var c={};a.forEach(function(a){var f=JSON.stringify(b.map(function(b){return a[b]}));c[f]=c[f]||[];c[f].push(a)});return Object.keys(c).map(function(a){return c[a]})},
y=function(a){return a.filter(function(a,c,d){return d.indexOf(a)===c})},u=function(a){var b={},c;for(c in a)b[c]=a[c];return b},r=function(a,b){for(var c in b)a[c]=e.undef(a[c])?b[c]:a[c];return a},R=function(a){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,b,c,e){return b+b+c+c+e+e});var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);a=parseInt(b[1],16);var c=parseInt(b[2],16),b=parseInt(b[3],16);return"rgb("+a+","+c+","+b+")"},z=function(a,b,c){0>c&&(c+=1);1<c&&--c;return c<
1/6?a+6*(b-a)*c:.5>c?b:c<2/3?a+(b-a)*(2/3-c)*6:a},m=function(a){return/([\+\-]?[0-9|auto\.]+)(%|px|pt|em|rem|in|cm|mm|ex|pc|vw|vh|deg)?/.exec(a)[2]},G=function(a,b,c){return m(b)?b:l(a,"translate")?m(c)?b+m(c):b+"px":l(a,"rotate")||l(a,"skew")?b+"deg":b},H=function(a,b){if((e.node(a)||e.svg(a))&&l(P,b))return"transform";if((e.node(a)||e.svg(a))&&"transform"!==b&&A(a,b))return"css";if((e.node(a)||e.svg(a))&&(a.getAttribute(b)||e.svg(a)&&a[b]))return"attribute";if(!e.null(a[b])&&!e.undef(a[b]))return"object"},
A=function(a,b){if(b in a.style)return getComputedStyle(a).getPropertyValue(E(b))||"0"},S=function(a,b){var c=l(b,"scale")?1:0;a=a.style.transform;if(!a)return c;for(var d=/(\w+)\((.+?)\)/g,f=[],e=[],g=[];f=d.exec(a);)e.push(f[1]),g.push(f[2]);a=g.filter(function(a,d){return e[d]===b});return a.length?a[0]:c},I=function(a,b){var c=H(a,b);return"transform"===c?S(a,b):"css"===c?A(a,b):"attribute"===c?a.getAttribute(b):a[b]||0},J=function(a,b,c){if(e.color(b)){if(!e.rgb(b)&&!e.rgba(b))if(e.hex(b))b=
R(b);else if(e.hsl(b)){a=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(b);b=parseInt(a[1])/360;c=parseInt(a[2])/100;a=parseInt(a[3])/100;if(0===c)c=a=b=a;else{var d=.5>a?a*(1+c):a+c-a*c,f=2*a-d;c=z(f,d,b+1/3);a=z(f,d,b);b=z(f,d,b-1/3)}b="rgb("+255*c+","+255*a+","+255*b+")"}else b=void 0;return b}if(m(b))return b;a=m(a.to)?m(a.to):m(a.from);!a&&c&&(a=m(c));return a?b+a:b},K=function(a){var b=/-?\d*\.?\d+/g;return{original:a,numbers:x(a).match(b)?x(a).match(b).map(Number):[0],strings:x(a).split(b)}},
T=function(a,b,c){return b.reduce(function(b,f,e){return b+a[e-1]+(f?f:c[e-1])})},U=function(a){return(a?t(e.array(a)?a.map(q):q(a)):[]).map(function(a,c){return{target:a,id:c}})},V=function(a,b){var c=[],d;for(d in a)if(!C.hasOwnProperty(d)&&"targets"!==d){var f=e.object(a[d])?u(a[d]):{value:a[d]};f.name=d;c.push(r(f,b))}return c},L=function(a,b,c,d){"transform"===c?(c=a+("("+G(a,b.from,b.to)+")"),b=a+("("+G(a,b.to)+")")):(a="css"===c?A(d,a):void 0,c=J(b,b.from,a),b=J(b,b.to,a));return{from:K(c),
to:K(b)}},W=function(a,b){var c=[];a.forEach(function(d,f){var n=d.target;return b.forEach(function(b){var l=H(n,b.name);if(l){var k;k=b.name;var h=b.value,h=q(e.func(h)?h(n,f):h);k={from:1<h.length?h[0]:I(n,k),to:1<h.length?h[1]:h[0]};h=u(b);h.animatables=d;h.type=l;h.from=L(b.name,k,h.type,n).from;h.to=L(b.name,k,h.type,n).to;h.round=e.color(k.from)||h.round?1:0;h.delay=(e.func(h.delay)?h.delay(n,f,a.length):h.delay)/g.speed;h.duration=(e.func(h.duration)?h.duration(n,f,a.length):h.duration)/g.speed;
c.push(h)}})});return c},X=function(a,b){a=W(a,b);return Q(a,["name","from","to","delay","duration"]).map(function(a){var b=u(a[0]);b.animatables=a.map(function(a){return a.animatables});b.totalDuration=b.delay+b.duration;return b})},B=function(a,b){a.tweens.forEach(function(c){var d=c.from,f=a.duration-(c.delay+c.duration);c.from=c.to;c.to=d;b&&(c.delay=f)});a.reversed=a.reversed?!1:!0},M=function(a){var b=[],c=[];a.tweens.forEach(function(a){if("css"===a.type||"transform"===a.type)b.push("css"===
a.type?E(a.name):"transform"),a.animatables.forEach(function(a){return c.push(a.target)})});return{properties:y(b).join(", "),elements:y(c)}},Y=function(a){var b=M(a);b.elements.forEach(function(a){return a.style.willChange=b.properties})},Z=function(a){M(a).elements.forEach(function(a){return a.style.removeProperty("will-change")})},aa=function(a,b){var c=a.path,d=a.value*b,f=function(f){return c.getPointAtLength(1<b?a.value+(f||0):d+(f||0))},e=f(),g=f(-1),f=f(1),k=a.name;return"translateX"===k?
e.x:"translateY"===k?e.y:"rotate"===k?180*Math.atan2(f.y-g.y,f.x-g.x)/Math.PI:void 0},ba=function(a,b){var c=Math.min(Math.max(b-a.delay,0),a.duration)/a.duration;b=a.to.numbers.map(function(b,f){f=a.from.numbers[f];var e=D[a.easing](c,a.elasticity);b=a.path?aa(a,e):f+e*(b-f);return a.round?Math.round(b*a.round)/a.round:b});return T(b,a.to.strings,a.from.strings)},N=function(a,b){var c=void 0;a.time=Math.min(b,a.duration);a.progress=a.time/a.duration*100;a.tweens.forEach(function(a){a.currentValue=
ba(a,b);var d=a.currentValue;a.animatables.forEach(function(b){var e=b.id;switch(a.type){case "css":b.target.style[a.name]=d;break;case "attribute":b.target.setAttribute(a.name,d);break;case "object":b.target[a.name]=d;break;case "transform":c||(c={}),c[e]||(c[e]=[]),c[e].push(d)}})});if(c)for(var d in c)a.animatables[d].target.style.transform=c[d].join(" ");a.emit("update",a);return a},O=function(a){var b={animatables:U(a.targets),settings:r(a,C),time:0,progress:0,running:!1,began:!1,ended:!1};b.properties=
V(a,b.settings);b.tweens=X(b.animatables,b.properties);b.duration=b.tweens.length?Math.max.apply(Math,b.tweens.map(function(a){return a.totalDuration})):a.duration/g.speed;return p(b)},k=[],v=void 0,w=function(){var a=function(){return v=requestAnimationFrame(b)},b=function(b){for(var d=0;d<k.length;d++)k[d].tick(b);a()};return{play:a,pause:function(){cancelAnimationFrame(v);v=0}}}(),g=function(a){function b(a){d[a]=function(b){if(e.func(b))return b=d.on(a,b.bind(d)),{anim:d,listener:b}}}var c={},
d=O(a);d.tick=function(a){if(d.running){d.ended=!1;c.current=c.last+a-c.start;var b=d.settings;!d.began&&b.begin&&c.current>=b.delay&&(d.emit("begin",d),d.started=!0);N(d,c.current);c.current>=d.duration&&(b.loop?(c.start=a,"alternate"===b.direction&&B(d,!0),e.number(b.loop)&&b.loop--):(d.ended=!0,d.pause(),d.started=!1,d.emit("complete")));c.last=0}};d.seek=function(a){return N(d,a/100*d.duration)};d.pause=function(){d.running=!1;d.emit("paused",d);Z(d);var a=k.indexOf(d);-1<a&&k.splice(a,1);k.length||
w.pause();return d};d.play=function(a){a&&(d=r(O(r(a,d.settings)),d));d.pause();d.running=!0;c.start="undefined"!=typeof performance?performance.now():+Date.now();c.last=d.ended?0:d.time;a=d.settings;"reverse"===a.direction&&B(d);"alternate"!==a.direction||a.loop||(a.loop=1);Y(d);k.push(d);v||w.play();return d};d.restart=function(){d.reversed&&B(d);d.emit("restart",d);d.pause();d.seek(0);return d.play()};b("begin");b("update");b("complete");d.settings.autoplay&&d.play();return d};g.speed=1;g.list=
k;g.remove=function(a){a=t(e.array(a)?a.map(q):q(a));for(var b,c=k.length-1;0<=c;c--){b=k[c];for(var d,f=b.tweens.length-1;0<=f;f--){d=b.tweens[f];for(var g=d.animatables.length-1;0<=g;g--)l(a,d.animatables[g].target)&&(d.animatables.splice(g,1),d.animatables.length||b.tweens.splice(f,1),b.tweens.length||b.pause())}}};g.easings=D;g.getValue=I;g.path=function(a){a=e.string(a)?F(a)[0]:a;return{path:a,value:a.getTotalLength()}};g.random=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};g.includes=
l;g.dupeObj=u;g.mergeObjs=r;g.flattenArr=t;g.removeArrDupes=y;g.eventemitter=p;g.play=w.play;g.pause=w.pause;return g});
